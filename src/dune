(menhir (modules parser))
(ocamllex lexer)

(library
 (name util)
 (preprocess (pps ppx_sexp_conv ppx_let))
 (wrapped false)
 (libraries sexplib)
 (modules StringMap UnionFind PrettyPrint Files SexpPrinter Greek Std))

(library
 (name lang)
 (preprocess (pps ppx_sexp_conv ppx_let))
 (wrapped false)
 (libraries sexplib util)
 (modules Parser Ast SurfaceAst AstPrinter SimpleChecker Lexer LabelManager SimpleTypes RefinementTypes Paths AstUtil Intrinsics))

(library
 (name consort)
 (preprocess (pps ppx_sexp_conv ppx_let with_monad))
 (wrapped false)
 (libraries sexplib util lang str)
 (modules Inference KCFA
          HornBackend OwnershipSolver SmtBackend
          Z3BasedBackend Z3Channel Consort SmtLibBackend
          Solver HoiceBackend SolverBridge NullSolver))

(executable
 (name test)
 (libraries consort)
 (modules Test))

(executable
 (name test_suite)
 (libraries consort)
 (modules Test_suite))

(executable
 (name genLin)
 (preprocess (pps ppx_sexp_conv))
 (libraries lang)
 (modules genLin))

(executable
 (name typecheck)
 (libraries lang)
 (modules Typecheck))

(executable
 (name ownership)
 (libraries consort)
 (modules Ownership))
            
(executable
 (name unsatCore)
 (libraries util sexplib)
 (modules UnsatCore))
