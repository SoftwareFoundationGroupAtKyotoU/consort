(menhir (modules parser))
(ocamllex lexer)

(library
 (name util)
 (preprocess (pps ppx_sexp_conv))
 (wrapped false)
 (libraries sexplib)
 (modules StringMap UnionFind PrettyPrint Files SexpPrinter Greek Std))

(library
 (name lang)
 (preprocess (pps ppx_sexp_conv))
 (wrapped false)
 (libraries sexplib util)
 (modules Parser Ast SurfaceAst AstPrinter SimpleChecker Lexer LabelManager SimpleTypes RefinementTypes Paths AstUtil Intrinsics))

(library
 (name consort)
 (preprocess (pps ppx_sexp_conv))
 (wrapped false)
 (libraries sexplib util lang str)
 (modules Inference KCFA
          HornBackend OwnershipSolver SmtBackend
          Z3BasedBackend Z3Channel VerifyUtil SmtLibBackend
          Prover SolverChannel HoiceBackend SolverBridge))

(executable
 (name test)
 (preprocess (pps ppx_sexp_conv))
 (libraries consort)
 (modules Test))

(executable
 (name test_suite)
 (preprocess (pps ppx_sexp_conv))
 (libraries consort)
 (modules Test_suite))

(executable
 (name genLin)
 (preprocess (pps ppx_sexp_conv))
 (libraries lang)
 (modules genLin))

(executable
 (name typecheck)
 (preprocess (pps ppx_sexp_conv))
 (libraries lang)
 (modules Typecheck))

(executable
 (name ownership)
 (preprocess (pps ppx_sexp_conv))
 (libraries consort)
 (modules Ownership))
            
(executable
 (name unsatCore)
 (libraries util sexplib)
 (preprocess (pps ppx_sexp_conv))
 (modules UnsatCore))
