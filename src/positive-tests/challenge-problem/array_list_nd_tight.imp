update(p) {
 let (curr,len) = *p in {
   assert(curr < len);
   p := (curr + 1,len)
 }
}

push(p) {
  let (curr,len) = *p in {
  if curr = len then
    let dl = len * 2 in
    p := (curr, dl + 1)
  else
    ()
  };
  update(p);
  push(p)
}

{
  let k = (_, _) in {
    $gamma {
   	   k: ($0: ~ <= $1 /\ ~ >= 0 int,
	    $1: ~ >= 0 int)
    };
    let p = mkref k in
    push(p)
  }
}
