push(p,x)
  p := x

pull(p)
  let x = *p in x

{
  let y = mkref _ in
  let x = mkref _ in
  {
  let z = 0 in push(y,z);
  let b = * in
  if b then {
    let t = pull(y) in x := t;
    let v = *x in let u = v + 1 in push(y,u)
  } else {
    let t = pull(y) in x := t;
    let v = *x in let u = v + 2 in push(y,u)
  };
  let t = pull(y) in assert(0 < t)
  }
}