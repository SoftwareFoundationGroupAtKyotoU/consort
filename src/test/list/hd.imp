mklist(n) {
    if n = 0 then Nil else {
        let h = _ in
        let m = n + -1 in
        let t = mkref mklist(m) in
        Cons h t
    }
}

hd(l) {
    match l with
      Nil -> fail
    | Cons h t -> return h
}

{
    let n = ( _ : ~ > 0) in
    let l = mklist(n) in
    match l with
      Nil -> fail
    | Cons h t -> assert(hd(l) = h)
}